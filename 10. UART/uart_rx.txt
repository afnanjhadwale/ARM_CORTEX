#include<LPC17xx.h>
#include<stdint.h>
#include"lcd_header.h"

#define UART  	((1<<4) | (1<<6))	
#define UART0    LPC_UART0


int main()
{
	char ch;

	LPC_SC->PCONP |=  (1<<3);			//turn on UART
	LPC_SC->PCLKSEL0 &= ~(0x03 <<6);	//pclk = cllk/4

	LPC_PINCON->PINSEL0 |= UART;		//P0.2 as TXD0 and P0.3 as RXD0

	UART0->LCR |= (1<<7);
	UART0->DLL = 6;
	UART0->DLM = 0;
	UART0->FDR |= (0x0C << 4) | (0x01);

	UART0->LCR &= ~(1<<7);

	UART0->LCR |= (0x03); //data length = 8bit
	UART0->LCR &= ~(1<<2);	//stop bit = 1bit
	UART0->LCR &= ~(1<<3); //no parity

	lcd_init();

	while((UART0->LSR & (1<<0)) == 0);
	ch = UART0->RBR;

	lcd_dat_write(ch);
	while(1);

}
